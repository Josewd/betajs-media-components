
<div data-selector="video-recorder-container" ba-show="{{!player_active}}"
     class="{{css}}-container {{csstheme}} {{css}}-size-{{csssize}}
     {{iecss}}-{{ie8 ? 'ie8' : 'noie8'}} {{css}}-{{ fullscreened ? 'fullscreen' : 'normal' }}-view
     {{cssrecorder}}-{{ firefox ? 'firefox' : 'common'}}-browser
     {{cssrecorder}}-{{themecolor}}-color" ba-styles="{{containerSizingStyles}}"
>

    <video tabindex="-1"
		   data-selector="recorder-status" class="{{css}}-video {{css}}-{{hasrecorder ? 'hasrecorder' : 'norecorder'}}"
		   data-video="video" playsinline disablePictureInPicture
	></video>
	<ba-videorecorder-faceoutline class="{{css}}-overlay" ba-if="{{faceoutline && hasrecorder && isrecorderready}}"></ba-videorecorder-faceoutline>
    <div data-selector="recorder-overlay" class='{{cssrecorder}}-overlay' ba-show="{{!hideoverlay}}" data-overlay="overlay">
		<ba-{{dynloader}}
			ba-css="{{cssloader || css}}"
			ba-cssrecorder="{{cssrecorder || css}}"
			ba-themecolor="{{themecolor}}"
			ba-template="{{tmplloader}}"
			ba-show="{{loader_active}}"
			ba-tooltip="{{loadertooltip}}"
			ba-hovermessage="{{=hovermessage}}"
			ba-label="{{loaderlabel}}"
		></ba-{{dynloader}}>

		<ba-{{dynmessage}}
			ba-css="{{cssmessage || css}}"
			ba-themecolor="{{themecolor}}"
			ba-cssrecorder="{{cssrecorder || css}}"
			ba-template="{{tmplmessage}}"
			ba-show="{{message_active}}"
			ba-message="{{message}}"
			ba-links="{{message_links}}"
			ba-event:click="message_click"
			ba-event:link="message_link_click"
		></ba-{{dynmessage}}>

		<ba-{{dyntopmessage}}
			ba-css="{{csstopmessage || css}}"
			ba-themecolor="{{themecolor}}"
			ba-cssrecorder="{{cssrecorder || css}}"
			ba-template="{{tmpltopmessage}}"
			ba-show="{{topmessage_active && (topmessage || hovermessage)}}"
			ba-topmessage="{{hovermessage || topmessage}}"
		></ba-{{dyntopmessage}}>

		<ba-{{dynchooser}}
			ba-if="{{chooser_active && !is_initial_state}}"
			ba-onlyaudio="{{onlyaudio}}"
			ba-facecamera="{{facecamera}}"
			ba-recordviafilecapture="{{recordviafilecapture}}"
			ba-css="{{csschooser || css}}"
			ba-themecolor="{{themecolor}}"
			ba-cssrecorder="{{cssrecorder || css}}"
			ba-template="{{tmplchooser}}"
			ba-allowscreen="{{allowscreen}}"
			ba-allowmultistreams="{{allowmultistreams}}"
			ba-parentpopup="{{popup}}"
			ba-allowrecord="{{allowrecord}}"
			ba-allowupload="{{allowupload}}"
			ba-allowcustomupload="{{allowcustomupload}}"
			ba-allowedextensions="{{allowedextensions}}"
			ba-primaryrecord="{{primaryrecord}}"
			ba-initialmessages="{{initialmessages}}"
			ba-timelimit="{{timelimit}}"
			ba-event:record="record_video"
			ba-event:record-screen="record_screen"
			ba-event:upload="video_file_selected"
		></ba-{{dynchooser}}>

		<ba-{{dynimagegallery}}
			ba-if="{{imagegallery_active}}"
			ba-css="{{cssimagegallery || css}}"
			ba-themecolor="{{themecolor}}"
			ba-cssrecorder="{{cssrecorder || css}}"
			ba-template="{{tmplimagegallery}}"
			ba-imagecount="{{gallerysnapshots}}"
			ba-imagenativewidth="{{nativeRecordingWidth}}"
			ba-imagenativeheight="{{nativeRecordingHeight}}"
			ba-event:image-selected="select_image"
			ba-event:upload-covershot="upload_covershot"
		></ba-{{dynimagegallery}}>

		<ba-{{dyncontrolbar}}
			ba-css="{{csscontrolbar || css}}"
			ba-cssrecorder="{{cssrecorder || css}}"
			ba-csstheme="{{csstheme || css}}"
			ba-themecolor="{{themecolor}}"
			ba-template="{{tmplcontrolbar}}"
			ba-show="{{controlbar_active}}"
			ba-cameras="{{cameras}}"
			ba-microphones="{{microphones}}"
			ba-noaudio="{{noaudio}}"
			ba-novideo="{{onlyaudio}}"
			ba-allowscreen="{{record_media==='screen' || record_media==='multistream'}}"
			ba-selectedcamera="{{selectedcamera || 0}}"
			ba-selectedmicrophone="{{selectedmicrophone || 0}}"
			ba-addstreamdeviceid="{{addstreamdeviceid || null}}"
			ba-showaddstreambutton="{{showaddstreambutton}}"
			ba-camerahealthy="{{camerahealthy}}"
			ba-microphonehealthy="{{microphonehealthy}}"
			ba-hovermessage="{{=hovermessage}}"
			ba-settingsvisible="{{settingsvisible}}"
			ba-recordvisible="{{recordvisible}}"
			ba-cancelvisible="{{allowcancel && cancancel}}"
			ba-uploadcovershotvisible="{{uploadcovershotvisible}}"
			ba-rerecordvisible="{{rerecordvisible}}"
			ba-stopvisible="{{stopvisible}}"
			ba-skipvisible="{{skipvisible}}"
			ba-controlbarlabel="{{controlbarlabel}}"
			ba-mintimeindicator="{{mintimeindicator}}"
			ba-timeminlimit="{{timeminlimit}}"
			ba-resumevisible="{{resumevisible}}"
			ba-pausable="{{pausable}}"
			ba-firefox="{{firefox}}"
			ba-event:select-camera="select_camera"
			ba-event:select-microphone="select_microphone"
			ba-event:invoke-record="record"
			ba-event:invoke-rerecord="rerecord"
			ba-event:invoke-stop="stop"
			ba-event:invoke-skip="invoke_skip"
			ba-event:invoke-pause="pause_recorder"
			ba-event:invoke-resume="resume"
			ba-event:invoke-cancel="cancel"
			ba-event:upload-covershot="upload_covershot"
			ba-event:toggle-face-mode="toggle_face_mode"
			ba-event:add-new-stream="add_new_stream"
		></ba-{{dyncontrolbar}}>

		<ba-{{dynhelperframe}}
			ba-if="{{helperframe_active || framevisible}}"
			ba-template="{{tmphelperframe}}"
			ba-framereversable= "{{multistreamreversable}}"
			ba-framedragable="{{multistreamdraggable}}"
			ba-frameresizeable="{{multistreamresizeable}}"
			ba-framepositionx="{{addstreampositionx}}"
			ba-framepositiony="{{addstreampositiony}}"
			ba-frameproportional="{{addstreamproportional}}"
			ba-flipframe="{{flip-camera}}"
		></ba-{{dynhelperframe}}>
	</div>
</div>


<div data-selector="recorder-player" ba-if="{{player_active}}" ba-styles="{{containerSizingStyles}}">
	<span ba-show="{{ie8}}">&nbsp;</span>
	<ba-{{dynvideoplayer}}
		ba-theme="{{theme || 'default'}}"
		ba-themecolor="{{themecolor}}"
		ba-cssrecorder="{{cssrecorder || css}}"
		ba-source="{{localplayback ? playbacksource : ''}}"
		ba-poster="{{localplayback ? playbackposter : ''}}"
		ba-hideoninactivity="{{false}}"
		ba-showsettingsmenu="{{showplayersettingsmenu}}"
		ba-onlyaudio="{{onlyaudio}}"
		ba-attrs="{{playerattrs}}"
		ba-data:id="player"
		ba-width="100%"
		ba-height="100%"
		ba-totalduration="{{duration}}"
		ba-rerecordable="{{rerecordable && (recordings === null || recordings > 0)}}"
		ba-submittable="{{manualsubmit && verified}}"
		ba-reloadonplay="{{true}}"
		ba-autoplay="{{autoplay}}"
		ba-nofullscreen="{{nofullscreen}}"
		ba-topmessage="{{playertopmessage}}"
		ba-allowtexttrackupload="{{allowtexttrackupload}}"
		ba-uploadtexttracksvisible="{{uploadtexttracksvisible}}"
		ba-snapshottype="{{snapshottype}}"
		ba-tracktags="{{tracktags}}"
		ba-tracktagsstyled="{{tracktagsstyled}}"
		ba-trackcuetext="{{trackcuetext}}"
		ba-acceptedtracktexts="{{acceptedtracktexts}}"
		ba-sharevideo="{{sharevideo}}"
		ba-videofitstrategy="{{videofitstrategy}}"
		ba-posterfitstrategy="{{posterfitstrategy}}"
		ba-event:loaded="ready_to_play"
		ba-event:rerecord="rerecord"
		ba-event:playing="playing"
		ba-event:paused="paused"
		ba-event:ended="ended"
		ba-event:submit="manual_submit"
		ba-event:upload-text-tracks="upload_text_tracks"
		ba-tracksshowselection="{{tracksshowselection}}"
		ba-trackselectorhovered="{{trackselectorhovered}}"
		ba-uploadlocales="{{uploadlocales}}"
		ba-frameselectionmode="{{frameselectionmode}}"
		ba-trimmingmode="{{trimmingmode}}"
		ba-timeminlimit="{{timeminlimit}}"
		ba-event:selected_label_value="selected_label_value"
		ba-event:move_to_option="move_to_option"
	>
	</ba-{{dynvideoplayer}}>
</div>
